<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 13px;
            margin: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }
        th, td {
            border: 1px solid #333;
            padding: 6px;
            text-align: center;
        }
        .no-border td {
            border: none;
            padding: 4px 6px;
        }
        .section-title {
            font-weight: bold;
            font-size: 14px;
            margin-top: 10px;
        }
        .bold {
            font-weight: bold;
        }
        .right {
            text-align: right;
        }
        .footer-table {
            width: 100%;
            border-collapse: collapse;
        }
        .footer-cell {
            border: 1px solid #333;
            padding: 10px;
            text-align: right;
        }
    </style>
</head>
<body>

    <table class="no-border">
        <tr>
            <td style="width: 50%; vertical-align: top; text-align: left;">
                {% if client_logo_url %}
                    <img src="{{ client_logo_url }}" alt="Client Logo" style="width: 150px; height: auto;">
                {% endif %}
            </td>
            <td style="width: 50%; text-align: right; text-align: left;">
                <p><strong>Seller:</strong> {{ data.sellerBusinessName }}</p>
                <p><strong>Address:</strong> {{ data.sellerAddress }}</p>
                <p><strong>NTN:</strong> {{ data.sellerNTNCNIC }}</p>
                <p><strong>STRN:</strong> {{ data.sellerSTRN }}</p>
            </td>
        </tr>
    </table>

<br><br>
    <table class="no-border" style="width: 100%; margin-bottom: 10px;">
        <tr>
            <!-- LEFT: Buyer Info -->
            <td style="width: 60%; vertical-align: top; border: none; text-align: left;">
                <p><strong>Buyer:</strong> {{ data.buyerBusinessName }}</p>
                <p><strong>Address:</strong> {{ data.buyerAddress }}</p>
                <p><strong>NTN:</strong> {{ data.buyerNTNCNIC }}</p>
                <p><strong>STRN:</strong> {{ data.buyerSTRN }}</p>
                <p><strong>CNIC:</strong> {{ data.buyerCNIC }}</p>
            </td>

            <!-- RIGHT: QR + FBR Logo -->
            <td style="width: 40%; vertical-align: top; text-align: right; border: none;">
                <div style="display: flex; justify-content: flex-end; gap: 10px;">
                    
                    <img src="https://atgmgyuzkoqklxnqgobq.supabase.co/storage/v1/object/public/client-logos/fbr_logo.png" style="width: 90px; height: auto;" alt="FBR Logo">
               
                    {% if qr_base64 %}
                        <img src="data:image/png;base64,{{ qr_base64 }}" style="width: 100px; height: 100px;" alt="QR Code">
                    {% endif %}
                </div>
            </td>
        </tr>
    </table>



    <table class="no-border">
        <tr>
            <td><strong>Date:</strong> {{ data.invoiceDate }}</td>
            <td class="right"><strong>Invoice No:</strong> {{ data.invoiceRefNo }}</td>
            <td class="right"><strong>FBR Invoice No:</strong> {{ data.fbrInvoiceNumber or "" }}</td>
        </tr>
    </table>



    <div class="section-title">Invoice Details</div>
    <table>
        <thead>
            <tr>
                <th>Sr. No.</th>
                <th>HS CODE</th>
                <th>Product Detail</th>
                <th>Quantity (MT)</th>
                <th>Rate</th>
                <th>Amount Excl. ST</th>
                <th>ST Rate</th>
                <th>Sales Tax</th>
                <th>Gross Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in data["items"] %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ item.hsCode }}</td>
                <td>{{ item.productDescription }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.unitrate }}</td>
                <td>{{ item.valueSalesExcludingST }}</td>
                <td>{{ item.rate }}</td>
                <td>{{ item.salesTaxApplicable }}</td>
                <td>{{ item.valueSalesExcludingST + item.salesTaxApplicable }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <br><br>

    <table class="footer-table">
        <tr>
            <td class="footer-cell"><strong>Sales Tax:</strong> {{ data.totalTax }}</td>
            <td class="footer-cell"><strong>Inclusive Value:</strong> {{ data.totalInclusive }}</td>
        </tr>
    </table>

    <p><strong>Amount in Words:</strong> {{ data.amountInWords }}</p>


</body>
</html>
